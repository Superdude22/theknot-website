---
import BaseLayout from '../layouts/BaseLayout.astro';
import Accordion from '../components/Accordion.tsx';
import { getCollection } from 'astro:content';
import fs from 'node:fs';
import path from 'node:path';

interface LocalPartner {
  name: string;
  handle?: string;
  description?: string;
  address?: string;
  hours?: string;
}

const policyFallback = [
  {
    title: 'BILLING & PAYMENTS',
    content: 'Payments & billing changes processed on the 1st of each month.\nSubmit all change requests by the 25th to ensure they\'ll be processed before billing.',
    buttonText: 'UPDATE BILLING',
    buttonLink: 'https://portal.climbtheknot.com/gnv/account/billing',
  },
  {
    title: 'MEMBERSHIP FREEZE',
    content: 'Freeze for $8/month (Minimum 1 month).\nLocks in your rate - even if we change pricing!\nEasy restart - just pay the prorated amount & resume billing.',
    buttonText: 'FREEZE YOUR MEMBERSHIP',
    buttonLink: 'https://portal.climbtheknot.com/gnv/account/change-request',
  },
  {
    title: 'CANCELLATIONS',
    content: 'Cancel anytime - Cancellations go into effect prior to billing on the first of the following month.\nPlanning on returning? Check out our Freeze option instead to come back on the prorated amount.',
    buttonText: 'TERMINATE YOUR MEMBERSHIP',
    buttonLink: 'https://portal.climbtheknot.com/gnv/account/change-request',
  },
  {
    title: 'KIDS POLICIES',
    content: 'We\'re excited to welcome kids and youth climbers into our space. To keep the gym safe and fun for everyone, we have a few important policies in place:\n- Children under 5 are not permitted to climb in our facility.\n- Children 12 and under must be actively supervised by an adult at all times. We follow a 1:1 adult-to-child ratio - each child needs their own supervising adult.\n- For youth ages 13-15, we require at least one adult for every four climbers (4:1 ratio).\n\nIMPORTANT NOTE: The gym can get crowded during peak hours, which makes it tougher for younger kids to climb safely. For that reason, we recommend that climbers 12 and under plan to finish their sessions before 6 PM on busy evenings.\n\nFor more info on our kids policies, check out our full list here:',
    buttonText: 'KIDS POLICIES',
    buttonLink: 'https://portal.climbtheknot.com/gnv/policies/kids',
  },
  {
    title: 'YOUTH MEMBERSHIPS',
    content: 'Kids & Youth memberships must be attached to a full-price adult membership ($80/month) and do not receive full member benefits. Check out our membership page for more info on benefits and registration.\n- Kids Membership (Ages 5 - 12): $25/month\n- Youth Membership (Ages 13 - 17): $45/month\n  - Minors 16 and older have the option to sign up for an adult membership or a youth membership. Take a look at the benefits on our member page.',
    buttonText: 'MEMBERSHIP PAGE',
    buttonLink: '/membership#benefits',
  },
];

const benefitsFallback = [
  { title: 'FREE GEAR RENTALS', description: 'For you & your guests!' },
  { title: 'ONE FREE MONTHLY GUEST PASS', description: 'Additional guest passes available for $15 each. Bring up to 3 guests at one time' },
  { title: 'FREE BELAY CLASS + CERTIFICATION', description: '' },
  { title: 'FREE YOGA + FITNESS CLASSES', description: 'At least one class offered every single day' },
  { title: 'UNLIMITED CLIMBING DURING BUSINESS HOURS', description: '' },
  { title: '20% OFF ALL PRODUCTS IN OUR GEAR SHOP', description: '' },
  { title: 'MEMBER KEY TAG FOR SPECIAL DISCOUNTS AT LOCAL BUSINESSES', description: 'Check out all of the spots below!' },
];

const membershipPathCandidates = [
  path.join(process.cwd(), 'src/content/pages/membership.json'),
  path.join(process.cwd(), 'src/content/pages/membership/index.json'),
];
const membershipPath =
  membershipPathCandidates.find((candidatePath) => fs.existsSync(candidatePath)) ||
  membershipPathCandidates[0];

let membershipPage: {
  hero?: {
    headline?: string;
    subtext?: string;
    backgroundImage?: string;
    backgroundImageLibraryPath?: string;
    backgroundVideo?: string;
    backgroundVideoLibraryPath?: string;
  };
  portalButton?: { text?: string; url?: string };
  pricing?: {
    headline?: string;
    promoPrice?: string;
    monthlyPrice?: string;
    cancelText?: string;
    billingText?: string;
    buttonText?: string;
    buttonUrl?: string;
    image?: string;
    imageLibraryPath?: string;
  };
  benefits?: { title?: string; description?: string }[];
  benefitsImage?: string;
  benefitsImageLibraryPath?: string;
  localDiscounts?: {
    headline?: string;
    intro?: string;
    partners15?: LocalPartner[];
    partners10?: LocalPartner[];
  };
  bottomCta?: {
    headline?: string;
    description?: string;
    buttonText?: string;
    buttonUrl?: string;
  };
};

try {
  membershipPage = JSON.parse(fs.readFileSync(membershipPath, 'utf-8'));
} catch {
  membershipPage = {
    hero: {
      headline: 'MEMBERSHIP',
      backgroundVideo: '/images/canva-final/membership-hero.mp4',
      backgroundImage: '/images/canva-final/canva-hills-background.jpg',
    },
    portalButton: {
      text: 'REDPOINT MEMBER PORTAL',
      url: 'https://portal.climbtheknot.com',
    },
    pricing: {
      headline: 'START YOUR MEMBERSHIP TODAY FOR',
      promoPrice: '$XX',
      monthlyPrice: '$80/month',
      cancelText: 'Cancel anytime',
      buttonText: 'JOIN NOW',
      buttonUrl: 'https://portal.climbtheknot.com/gnv/memberships/join',
      image: '/images/canva-final/membership-wall-gear-1280.jpg',
    },
    benefits: benefitsFallback,
    benefitsImage: '/images/canva-final/membership-climber-benefits-960.jpg',
  };
}

const toPublicUrl = (libraryPath?: string) =>
  libraryPath && libraryPath.startsWith('public/')
    ? `/${libraryPath.slice('public/'.length)}`
    : undefined;

const heroContent = membershipPage.hero || {};
const portalButton = membershipPage.portalButton || {};
const pricing = membershipPage.pricing || {};
const benefits =
  Array.isArray(membershipPage.benefits) && membershipPage.benefits.length > 0
    ? membershipPage.benefits
    : benefitsFallback;
const membershipHeroImage =
  toPublicUrl(heroContent.backgroundImageLibraryPath) ||
  heroContent.backgroundImage ||
  '/images/canva-final/canva-hills-background.jpg';
const membershipHeroVideo =
  toPublicUrl(heroContent.backgroundVideoLibraryPath) ||
  heroContent.backgroundVideo ||
  '/images/canva-final/membership-hero.mp4';
const pricingImage =
  toPublicUrl(pricing.imageLibraryPath) ||
  pricing.image ||
  '/images/canva-final/membership-wall-gear-1280.jpg';
const benefitsImage =
  toPublicUrl(membershipPage.benefitsImageLibraryPath) ||
  membershipPage.benefitsImage ||
  '/images/canva-final/membership-climber-benefits-960.jpg';

type PolicyItem = {
  title: string;
  content: string;
  buttonText: string;
  buttonLink: string;
  order?: number;
};

let policyItems: PolicyItem[] = policyFallback;
try {
  const policiesCollection = await getCollection('policies');
  if (policiesCollection.length > 0) {
    policyItems = policiesCollection
      .map((p) => ({
        title: p.data.title,
        content:
          typeof p.data.content === 'string'
            ? p.data.content
            : (p.data.content?.document
                ?.map((block: { children?: { text?: string }[] }) =>
                  (block.children || []).map((c) => c.text || '').join('')
                )
                .filter(Boolean)
                .join('\n\n') || ''),
        buttonText: p.data.buttonText || '',
        buttonLink: p.data.buttonLink || '',
        order: p.data.order,
      } as PolicyItem))
      .sort((a, b) => (a.order || 99) - (b.order || 99));
  }
} catch {
  policyItems = policyFallback;
}

const localDiscounts = membershipPage.localDiscounts || {
  headline: 'LOCAL DISCOUNTS',
  intro: 'Bring your member key tag to any of our local partners for a discount on your order! Click on the icons for address, hours, and more info.',
  partners15: [],
  partners10: [],
};
const fifteenPercentPartners = localDiscounts.partners15 || [];
const tenPercentPartners = localDiscounts.partners10 || [];
const bottomCta = membershipPage.bottomCta;
---

<BaseLayout title="Membership">
  <!-- Hero Section with Video -->
  <section class="hero-section">
    <div class="hero-background">
      <video
        data-membership-hero-video
        muted
        loop
        playsinline
        preload="none"
        poster={membershipHeroImage}
        class="hero-video"
      >
      </video>
      <img
        src={membershipHeroImage}
        alt="Membership hero fallback background"
        class="hero-fallback"
        loading="eager"
        fetchpriority="high"
        decoding="async"
        width="1438"
        height="560"
      />
    </div>
    <div class="hero-content">
      <h1 class="hero-headline">{heroContent.headline || 'MEMBERSHIP'}</h1>
      {heroContent.subtext && <p class="hero-subtext">{heroContent.subtext}</p>}
    </div>
  </section>

  <!-- REDPOINT MEMBER PORTAL Button Section -->
  <section class="portal-section">
    <a
      href={portalButton.url || 'https://portal.climbtheknot.com'}
      target="_blank"
      rel="noopener noreferrer"
      class="portal-button"
    >
      {portalButton.text || 'REDPOINT MEMBER PORTAL'}
    </a>
  </section>

  <!-- Pricing and JOIN NOW Section -->
  <section class="pricing-section">
    <div class="pricing-container">
      <div class="pricing-image">
        <img
          src={pricingImage}
          alt="Climbing wall with gear and holds"
          loading="lazy"
          decoding="async"
          width="1280"
          height="721"
        />
      </div>
      <div class="pricing-info">
        <h2 class="pricing-heading">
          {(pricing.headline || 'START YOUR MEMBERSHIP TODAY FOR')} <span class="price-highlight">{pricing.promoPrice || '$XX'}</span>
        </h2>
        <p class="price-monthly">{pricing.monthlyPrice || '$80/month'}</p>
        <p class="pricing-note">{pricing.cancelText || 'Cancel anytime'}</p>
        <a
          href={pricing.buttonUrl || 'https://portal.climbtheknot.com/gnv/memberships/join'}
          target="_blank"
          rel="noopener noreferrer"
          class="join-button"
        >
          {pricing.buttonText || 'JOIN NOW'}
        </a>
      </div>
    </div>
    {pricing.billingText && (
      <p class="billing-text">{pricing.billingText}</p>
    )}
  </section>

  <!-- Rates & Policies Accordion Section -->
  <section class="policies-section">
    <Accordion client:visible items={policyItems} />
  </section>

  <!-- Benefits Section -->
  <section class="benefits-section" id="benefits">
    <div class="benefits-container">
      <div class="benefits-list">
        <h2 class="benefits-heading">MEMBER BENEFITS</h2>
        <ul class="benefits-items">
          {benefits.map((benefit) => (
            <li class="benefit-item">
              <div class="benefit-check">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="11" stroke="var(--color-manatee, #84BABF)" stroke-width="2" fill="none" />
                  <path d="M7 12l3 3 7-7" stroke="var(--color-manatee, #84BABF)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="benefit-text">
                <span class="benefit-title">{benefit.title}</span>
                {benefit.description && <span class="benefit-description">{benefit.description}</span>}
              </div>
            </li>
          ))}
        </ul>
      </div>
      <div class="benefits-image">
        <img
          src={benefitsImage}
          alt="Climber enjoying membership benefits"
          loading="lazy"
          decoding="async"
          width="960"
          height="1440"
        />
      </div>
    </div>
  </section>

  <!-- Local Discounts Section -->
  <section class="discounts-section">
    <h2 class="discounts-heading">{localDiscounts.headline || 'LOCAL DISCOUNTS'}</h2>
    {localDiscounts.intro && <p class="discounts-intro">{localDiscounts.intro}</p>}

    {fifteenPercentPartners.length > 0 && (
      <div class="discount-tier">
        <h3 class="tier-label">15%</h3>
        <div class="business-grid">
          {fifteenPercentPartners.map((partner) => (
            <button
              class="business-card"
              data-business={JSON.stringify(partner)}
            >
              <div class="business-image">
                <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                  <rect x="10" y="20" width="40" height="30" rx="2" fill="rgba(255,255,255,0.3)" />
                  <rect x="20" y="10" width="20" height="15" rx="2" fill="rgba(255,255,255,0.2)" />
                </svg>
              </div>
              <span class="business-name">{partner.name}</span>
            </button>
          ))}
        </div>
      </div>
    )}

    {tenPercentPartners.length > 0 && (
      <div class="discount-tier">
        <h3 class="tier-label">10%</h3>
        <div class="business-grid">
          {tenPercentPartners.map((partner) => (
            <button
              class="business-card"
              data-business={JSON.stringify(partner)}
            >
              <div class="business-image">
                <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                  <rect x="10" y="20" width="40" height="30" rx="2" fill="rgba(255,255,255,0.3)" />
                  <rect x="20" y="10" width="20" height="15" rx="2" fill="rgba(255,255,255,0.2)" />
                </svg>
              </div>
              <span class="business-name">{partner.name}</span>
            </button>
          ))}
        </div>
      </div>
    )}
  </section>

  <!-- Bottom CTA Section -->
  {bottomCta && (
    <section class="bottom-cta-section">
      <h2 class="bottom-cta-heading">{bottomCta.headline}</h2>
      {bottomCta.description && <p class="bottom-cta-description">{bottomCta.description}</p>}
      {bottomCta.buttonText && (
        <a
          href={bottomCta.buttonUrl || 'https://portal.climbtheknot.com'}
          target="_blank"
          rel="noopener noreferrer"
          class="join-button"
        >
          {bottomCta.buttonText}
        </a>
      )}
    </section>
  )}

  <script is:inline define:vars={{ membershipHeroVideo }}>
    (() => {
      const video = document.querySelector('[data-membership-hero-video]');
      if (!video) return;
      const source = membershipHeroVideo;

      const hydrateVideo = () => {
        if (video.dataset.loaded === 'true') return;
        const sourceEl = document.createElement('source');
        sourceEl.src = source;
        sourceEl.type = 'video/mp4';
        video.appendChild(sourceEl);
        video.load();
        const playPromise = video.play();
        if (playPromise && typeof playPromise.catch === 'function') {
          playPromise.catch(() => {});
        }
        video.dataset.loaded = 'true';
      };

      const scheduleHydration = () => {
        window.setTimeout(hydrateVideo, 3500);
      };

      if (document.readyState === 'complete') {
        scheduleHydration();
      } else {
        window.addEventListener('load', scheduleHydration, { once: true });
      }

      // If user interacts early, hydrate immediately to avoid perceived delay.
      ['pointerdown', 'keydown', 'touchstart'].forEach((eventName) => {
        window.addEventListener(eventName, hydrateVideo, { once: true, passive: true });
      });
    })();
  </script>
</BaseLayout>

<style>
  .hero-section {
    position: relative;
    min-height: 50vh;
    overflow: hidden;
  }

  .hero-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .hero-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
  }

  .hero-fallback {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center bottom;
    z-index: 0;
  }

  .hero-content {
    position: absolute;
    right: 48px;
    bottom: 15%;
    z-index: 2;
  }

  .hero-headline {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 72px;
    font-weight: 900;
    color: #fff;
    line-height: 1.1;
    margin: 0;
    text-transform: uppercase;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
  }

  .hero-subtext {
    margin: 8px 0 0;
    font-family: var(--font-body, 'Rubik', sans-serif);
    font-size: 18px;
    color: #fff;
    text-align: right;
  }

  .portal-section {
    display: flex;
    justify-content: flex-end;
    padding: 40px 48px;
    background-color: #000;
  }

  .portal-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 32px;
    background-color: var(--color-rust, #B94237);
    color: #fff;
    font-family: var(--font-heading, 'Uniform Pro', sans-serif);
    font-size: 16px;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    border: none;
    cursor: pointer;
    transition: opacity 0.2s ease;
  }

  .portal-button:hover {
    opacity: 0.9;
  }

  .pricing-section {
    padding: 64px 48px;
    background-color: #fff;
  }

  .pricing-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 48px;
    max-width: 1000px;
    margin: 0 auto;
  }

  .pricing-image img {
    width: 400px;
    height: 300px;
    object-fit: cover;
    border-radius: 8px;
  }

  .pricing-info {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .pricing-heading {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 28px;
    font-weight: 900;
    color: #000;
    text-transform: uppercase;
    margin: 0;
    line-height: 1.3;
  }

  .price-highlight {
    color: var(--color-rust, #B94237);
  }

  .price-monthly {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 24px;
    font-weight: 900;
    color: #000;
    margin: 0;
  }

  .pricing-note {
    font-family: var(--font-body, 'Rubik', sans-serif);
    font-size: 16px;
    color: #666;
    margin: 0;
  }

  .join-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 40px;
    background-color: var(--color-rust, #B94237);
    color: #fff;
    font-family: var(--font-heading, 'Uniform Pro', sans-serif);
    font-size: 16px;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    border: none;
    cursor: pointer;
    transition: opacity 0.2s ease;
    margin-top: 8px;
  }

  .join-button:hover {
    opacity: 0.9;
  }

  .billing-text {
    max-width: 1000px;
    margin: 32px auto 0;
    font-family: var(--font-body, 'Rubik', sans-serif);
    font-size: 14px;
    color: #666;
    line-height: 1.6;
    text-align: center;
  }

  .policies-section {
    padding: 48px 24px 64px;
    background-color: #000;
  }

  .policies-section :global(.accordion) {
    max-width: 900px;
    margin: 0 auto;
  }

  .benefits-section {
    padding: 64px 48px;
    background-color: var(--color-sand, #FAF9F5);
  }

  .benefits-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 48px;
    max-width: 1000px;
    margin: 0 auto;
  }

  .benefits-list {
    flex: 1;
    padding: 32px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .benefits-heading {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 28px;
    font-weight: 900;
    color: #000;
    text-transform: uppercase;
    margin: 0 0 24px 0;
    letter-spacing: 1px;
  }

  .benefits-items {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .benefit-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .benefit-check {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .benefit-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .benefit-title {
    font-family: var(--font-heading, 'Uniform Pro', sans-serif);
    font-size: 14px;
    font-weight: 700;
    color: #000;
    text-transform: uppercase;
  }

  .benefit-description {
    font-family: var(--font-body, 'Rubik', sans-serif);
    font-size: 12px;
    color: #666;
  }

  .benefits-image img {
    width: 400px;
    height: 400px;
    object-fit: cover;
    border-radius: 8px;
    filter: sepia(50%);
  }

  .discounts-section {
    padding: 64px 48px;
    background-color: #000;
  }

  .discounts-heading {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 32px;
    font-weight: 900;
    color: #fff;
    text-transform: uppercase;
    text-align: center;
    margin: 0 0 16px 0;
    letter-spacing: 2px;
  }

  .discounts-intro {
    max-width: 800px;
    margin: 0 auto 48px;
    color: #ccc;
    font-family: var(--font-body, 'Rubik', sans-serif);
    font-size: 16px;
    line-height: 1.6;
    text-align: center;
  }

  .bottom-cta-section {
    padding: 64px 48px;
    background-color: #fff;
    text-align: center;
  }

  .bottom-cta-heading {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 28px;
    font-weight: 900;
    color: #000;
    text-transform: uppercase;
    margin: 0 0 16px 0;
  }

  .bottom-cta-description {
    max-width: 800px;
    margin: 0 auto 24px;
    color: #333;
    font-family: var(--font-body, 'Rubik', sans-serif);
    font-size: 16px;
    line-height: 1.6;
  }

  .discount-tier {
    margin-bottom: 48px;
  }

  .tier-label {
    font-family: var(--font-heading, 'Zing Rust', sans-serif);
    font-size: 64px;
    font-weight: 900;
    color: var(--color-limestone, #D0D96F);
    text-align: center;
    margin: 0 0 24px 0;
  }

  .business-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 24px;
  }

  .business-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    width: 150px;
    padding: 16px;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: transform 0.2s ease;
  }

  .business-card:hover {
    transform: scale(1.05);
  }

  .business-image {
    width: 120px;
    height: 120px;
    background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    filter: grayscale(100%);
  }

  .business-name {
    font-family: var(--font-heading, 'Uniform Pro', sans-serif);
    font-size: 12px;
    font-weight: 700;
    color: #fff;
    text-transform: uppercase;
    text-align: center;
    letter-spacing: 0.5px;
  }

  @media (max-width: 768px) {
    .hero-section {
      min-height: 50vh;
    }

    .hero-content {
      right: 24px;
      bottom: 10%;
    }

    .hero-headline {
      font-size: 42px;
    }

    .hero-subtext {
      font-size: 14px;
    }

    .portal-section {
      padding: 32px 16px;
      justify-content: center;
    }

    .portal-button {
      width: 100%;
      max-width: 320px;
      padding: 16px 24px;
    }

    .pricing-section {
      padding: 48px 24px;
    }

    .pricing-container {
      flex-direction: column;
      gap: 32px;
    }

    .pricing-image img {
      width: 100%;
      max-width: 100%;
      height: auto;
    }

    .pricing-info {
      align-items: center;
      text-align: center;
    }

    .pricing-heading {
      font-size: 24px;
    }

    .price-monthly {
      font-size: 22px;
    }

    .join-button {
      width: 100%;
      max-width: 320px;
    }

    .policies-section {
      padding: 24px 16px 48px;
    }

    .benefits-section {
      padding: 48px 24px;
    }

    .benefits-container {
      flex-direction: column;
      gap: 32px;
    }

    .benefits-list {
      padding: 24px;
    }

    .benefits-heading {
      font-size: 24px;
      text-align: center;
    }

    .benefits-image img {
      width: 100%;
      max-width: 100%;
      height: auto;
      aspect-ratio: 4/3;
    }

    .discounts-section {
      padding: 48px 24px;
    }

    .discounts-heading {
      font-size: 24px;
    }

    .tier-label {
      font-size: 48px;
    }

    .business-card {
      width: 130px;
    }

    .business-image {
      width: 100px;
      height: 100px;
    }

    .business-name {
      font-size: 11px;
    }
  }
</style>
